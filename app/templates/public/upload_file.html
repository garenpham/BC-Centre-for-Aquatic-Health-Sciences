{% extends "public/templates/public_template.html" %}

{% block title %}Home{% endblock %}

{% block main %}
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css">
<script src="http://code.jquery.com/jquery-1.11.2.min.js" type="text/javascript"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.js"></script>
<div class="container">
  <div class="row">
    <div class="col">
      <h1>Upload file</h1>
      <hr>
      <form action="/upload-file" method="POST" enctype="multipart/form-data">

        <!-- <div class="form-group"> -->
        <!--   <label>Select file to upload</label> -->
        <!--   <div class="custom-file"> -->
        <!--     <input type="file" class="custom-file-input" name="file" id="file" oninput="filesize(this);"> -->
        <!--     <label id="upload-label" class="custom-file-label" for="file">Select file...</label> -->
        <!--     <input type="text" class="form-control" name="Sample ID" id="Sample ID" placeholder="Sample_ID" required> -->
        <!--   </div> -->
        <!-- </div> -->
        <div>
          <input type="file" id="file" name="file" multiple oninput="filesize(this);">
        </div>
        <div>
          <input type="text" class="form-control" name="Sample ID" id="Sample ID" placeholder="Sample_ID" required>
        </div>
        <div>
          <button type="submit" class="btn btn-primary">Upload</button>
        </div>

      </form>
        {% for message in get_flashed_messages() %}

        <div role="alert", class="msg">{{ message }}</div>
        <style>
        .msg{
          color: red;
          font-size: 17px;
        }
        </style>

        {% endfor %}
        <table id="show_data_table" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
          <thead>
          <tr>
            {% for header in headers %}
            <th>{{header}}</th>
            {% endfor %}
          </tr>
          </thead>
          <tbody>
            {% for row in data %}
                <tr>
                {% for cell in row %}
                    <td>{{ cell }}</td>
                {% endfor %}
                <!-- <td class="text-center">
                  <form action="/upload-file" method="post">
                      <input type="hidden" name="sample_id" value={{ row[0] }}>
                      <ul class="list-inline m-0">
                          {% if user_role == "admin" %}
                          <li class="list-inline-item">
                              <button type="submit" name="submit_button" class="btn btn-danger" value="download_file">Download</button>
                          </li>
                          {% endif %}
                      </ul>
                  </form>
                </td> -->
                </tr>
            {% endfor %}
          </tbody>
      </table>
    </div>
  </div>
</div>

<script defer>
  const filesize = (element) => {
    document.cookie = `filesize=${element.files[0].size}`
  }
  let table = new DataTable('#show_data_table', {
    });
</script>

{% endblock %}
