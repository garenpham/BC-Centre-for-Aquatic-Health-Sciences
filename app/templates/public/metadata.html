      <!--Jquery Cdn -->
      <script src="https://code.jquery.com/jquery-3.5.1.js"
      integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
      crossorigin="anonymous"></script>
{% extends "public/templates/public_template.html" %}

{% block title %}Home{% endblock %}

{% block main %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/custom_metadata.css') }}">
<div class="container">
 <div class="row">
   <div class="col">
     <h1>MetaData</h1>
     <hr>
     {% with messages = get_flashed_messages(with_categories=true) %}
     <!-- Categories: success (green), info (blue), warning (yellow), danger (red) -->
     {% if messages %}
       {% for category, message in messages %}
         <div class="alert alert-{{ category }} alert-dismissible" role="alert">
           {{ message }}
         <button type="button" class="close" data-dismiss="alert" aria-label="Close">
           <span aria-hidden="true">&times;</span></button>
         </div>
       {% endfor %}
     {% endif %}
     {% endwith %}

     {% if form_data[-1] == 1 %}
     <form class="needs-validation" action="/metadata" method="POST" enctype="multipart/form-data">
       <div class="form-group">
         <h2>Enter Location:</h2>
         <p>Creates a new location for the database.</p>
         <div class="form-group">
           <input type="number" step="1" min="0" name="Location ID" class="form-control" id="Location ID" placeholder="Hatchery ID in Database" required value="{{form_data[0]}}">
           <input type="text" name="Location Name" class="form-control" id="Location Name" placeholder="Hatchery" required value="{{form_data[1]}}">
         </div>
       </div>
       <button type="submit" class="btn btn-primary" name="submit_button" value="update_location" >Update or Add New Location Name</button>
     </form>
     {% else %}
     <form class="needs-validation" action="/metadata" method="POST" enctype="multipart/form-data">
       <div class="form-group">
         <h2>Enter Location:</h2>
         <p>Creates a new location for the database.</p>
         <div class="form-group">
           <input type="number" step="1" min="0" name="Location ID" class="form-control" id="Location ID" placeholder="Hatchery ID in Database" required >
           <input type="text" name="Location Name" class="form-control" id="Location Name" placeholder="Hatchery" required >
         </div>
       </div>
       <button type="submit" class="btn btn-primary" name="submit_button" value="update_location" >Update or Add New Location Name</button>
     </form>
     {% endif %}

     {% if form_data[-1] == 2 %}
     <form class="needs-validation" action="/metadata" method="POST" enctype="multipart/form-data">
       <div class="form-group">
         <h2>Enter Submission Data</h2>
         <p>Requires pre-existing Location ID number. CAHS Number is the primary key.</p>
         <div class="form-group">
           <input type="text" class="form-control" name="CAHS Submission Number Submission Data" id="CAHS Submission Number Submission Data" placeholder="CAHS Submission Number" required value="{{form_data[0]}}">
           <input type="text" class="form-control" name="Samplers" id="Samplers" placeholder="Samplers" value="{{form_data[1]}}">
           <input type="number" step="any" class="form-control" name="Water Temperature (c)" id="Water Temperature (c)" placeholder="Water Temperature (c)" value="{{form_data[2]}}">
           <input type="number" step="any" min="0" class="form-control" name="Oxygen (mg/L)" id="Oxygen (mg/L)" placeholder="Oxygen (mg/L)" value="{{form_data[3]}}">
           <input type="number" step="any" min="0" class="form-control" name="Saturation (%)" id="Saturation (%)" placeholder="Saturation (%)" value="{{form_data[4]}}">
           <input type="number" step="1" min="0" class="form-control" name="# Fish Swabs" id="# Fish Swabs" placeholder="# Fish Swabs" required value="{{form_data[5]}}">
           <input type="number" step="1" min="0" class="form-control" name="# Biofilm Swabs" id="# Biofilm Swabs" placeholder="# Biofilm Swabs" required value="{{form_data[6]}}">
           <input type="number" step="1" min="0" class="form-control" name="# Water Samples Collected" id="# Water Samples Collected" placeholder="# Water Samples Collected" required value="{{form_data[7]}}">
           <input type="number" step="1" min="0" class="form-control" name="Vol Water collected (mL)" id="Vol Water collected (mL)" placeholder="Vol Water collected (mL)" required value="{{form_data[8]}}">
           <select class="form-control" name="location_id" id="location_id" required>
             <option value="none" selected>{{form_data[9]}}</option>
             {% for i in locations %}
             <option value={{i[0]}}>{{i[0]}}</option>
             {% endfor %}
           </select>
           <input type = "date" class="form-control" name="Date Collected" id="Date Collected" placeholder="Date Collected (yyyy-mm-dd)" required value="{{form_data[10]}}">
         </div>
       </div>
       <button type="submit" class="btn btn-primary" name="submit_button" value="update_submission_data">Update or Add New Submission Data</button>
     </form>
     {% else %}
     <form class="needs-validation" action="/metadata" method="POST" enctype="multipart/form-data">
       <div class="form-group">
         <h2>Enter Submission Data</h2>
         <p>Requires pre-existing Location ID number. CAHS Number is the primary key.</p>
         <div class="form-group">
           <input type="text" class="form-control" name="CAHS Submission Number Submission Data" id="CAHS Submission Number Submission Data" placeholder="CAHS Submission Number" required>
           <input type="text" class="form-control" name="Samplers" id="Samplers" placeholder="Samplers">
           <input type="number" step="any" class="form-control" name="Water Temperature (c)" id="Water Temperature (c)" placeholder="Water Temperature (c)">
           <input type="number" step="any" min="0" class="form-control" name="Oxygen (mg/L)" id="Oxygen (mg/L)" placeholder="Oxygen (mg/L)">
           <input type="number" step="any" min="0" class="form-control" name="Saturation (%)" id="Saturation (%)" placeholder="Saturation (%)">
           <input type="number" step="1" min="0" class="form-control" name="# Fish Swabs" id="# Fish Swabs" placeholder="# Fish Swabs" required>
           <input type="number" step="1" min="0" class="form-control" name="# Biofilm Swabs" id="# Biofilm Swabs" placeholder="# Biofilm Swabs" required>
           <input type="number" step="1" min="0" class="form-control" name="# Water Samples Collected" id="# Water Samples Collected" placeholder="# Water Samples Collected" required>
           <input type="number" step="1" min="0" class="form-control" name="Vol Water collected (mL)" id="Vol Water collected (mL)" placeholder="Vol Water collected (mL)" required>
           <select class="form-control" name="location_id" id="location_id" required>
             <option value="none" selected disabled>Hatchery Id</option>
             {% for i in locations %}
             <option value={{i[0]}}>{{i[0]}}</option>
             {% endfor %}
           </select>
           <input type = "date" class="form-control" name="Date Collected" id="Date Collected" placeholder="Date Collected (yyyy-mm-dd)" required>
         </div>
       </div>
       <button type="submit" class="btn btn-primary" name="submit_button" value="update_submission_data">Update or Add New Submission Data</button>
     </form>
     {% endif %}

     {% if form_data[-1] == 3 %}
     <form class="needs-validation" action="/metadata" method="POST" enctype="multipart/form-data" id="sample-data-form">
       <div class="form-group">
         <h2>Enter Sample Data</h2>
         <p>Requirement to enter a valid CAHS Submission Number or the update will fail. Will later add detection for this and display an error.</p>
         <div class="form-group">
           <input type="text" class="form-control" name="Sample ID" id="Sample ID" placeholder="Sample ID" required value="{{form_data[0]}}">
           <input type="text" class="form-control" name="CAHS Submission Number" id="CAHS Submission Number" placeholder="CAHS Submission Number" required value="{{form_data[1]}}">
          
           <select class="form-control" name="Sample Type" id="Sample Type" required>
             <option value="none" selected >{{form_data[2]}}</option>
             <option value="biofilm">Biofilm swab</option>
             <option value="fish">Fish swab</option>
             <option value="water">Water swab</option>
           </select>
           <input type="text" class="form-control" name="Sample location" id="Sample location" placeholder="Sample location" required value="{{form_data[3]}}">
           <input type="number" step="any" min="0" class="form-control" name="Fish Weight (g)" id="Fish Weight (g)" placeholder="Fish Weight (g)" value="{{form_data[4]}}">
           <input type="number" step="any" min="0" class="form-control" name="Fish Length (mm)" id="Fish Length (mm)" placeholder="Fish Length (mm)" value="{{form_data[5]}}">
           <input type="text" class="form-control" name="Material Swabbed for Biofilm" id="Material Swabbed for Biofilm" placeholder="Material Swabbed for Biofilm" value="{{form_data[6]}}">
           <input type = "date" class="form-control" name="Date Filtered" id="Date Filtered" placeholder="Date Filtered (yyyy-mm-dd)" value="{{form_data[7]}}">
           <input type="number" step="any" min="0" class="form-control" name="Volume Filtered (mL)" id="Volume Filtered (mL)" placeholder="Volume Filtered (mL)" value="{{form_data[8]}}">
           <input type="text" step="1" class="form-control" name="Time to Filter (h:mm:ss)" id="Time to Filter (h:mm:ss)" placeholder="Time to Filter (hh:mm:ss)" value="{{form_data[9]}}">
         </div>
       </div>
       <button type="submit" class="btn btn-primary" name="submit_button" value="update_sample_data">Update Sample Data</button>
     </form>

     {% else %}
     <form class="needs-validation" action="/metadata" method="POST" enctype="multipart/form-data" id="sample-data-form">
       <div class="form-group">
         <h2>Enter Sample Data</h2>
         <p>Requirement to enter a valid CAHS Submission Number or the update will fail. Will later add detection for this and display an error.</p>
         <div class="form-group">
           <input type="text" class="form-control" name="Sample ID" id="Sample ID" placeholder="Sample_ID" required >
           <input type="text" class="form-control" name="CAHS Submission Number" id="CAHS Submission Number" placeholder="CAHS Submission Number" required >
 
           <select class="form-control" name="Sample Type" id="Sample Type" required>
               <option value="none" selected disabled>Sample Type</option>
               <option value="biofilm">Biofilm swab</option>
               <option value="fish">Fish swab</option>
               <option value="water">Water swab</option>
           </select>
           <input type="text" class="form-control" name="Sample location" id="Sample location" placeholder="Sample location" required >
               
           <input type="number" step="any" min="0" class="form-control" name="Fish Weight (g)" id="Fish Weight (g)" placeholder="Fish Weight (g)">
           <input type="number" step="any" min="0" class="form-control" name="Fish Length (mm)" id="Fish Length (mm)" placeholder="Fish Length (mm)" >
           <input type="text" class="form-control" name="Material Swabbed for Biofilm" id="Material Swabbed for Biofilm" placeholder="Material Swabbed for Biofilm"\>
           <input type = "date" class="form-control" name="Date Filtered" id="Date Filtered" placeholder="Date Filtered (yyyy-mm-dd)" value="{{form_data[7]}}">
           <input type="number" step="any" min="0" class="form-control" name="Volume Filtered (mL)" id="Volume Filtered (mL)" placeholder="Volume Filtered (mL)" >
           <input type="text" step="1" class="form-control" name="Time to Filter (h:mm:ss)" id="Time to Filter (h:mm:ss)" placeholder="Time to Filter (hh:mm:ss)" >
         </div>
       </div>
       <button type="submit" class="btn btn-primary" name="submit_button" value="update_sample_data">Update Sample Data</button>
     </form>
     {% endif %}
     <form class="needs-validation" action="/metadata" method="POST" enctype="multipart/form-data" id="sample-data-update-form">
       <div class="form-group">
         <h2>Update Existing Sample Data</h2>
         <p>Enter Sample ID to edit existing sample data.</p>
         <div class="form-group">
     <input type="text" class="form-control" name="sample_id" id="sample_id" placeholder="Sample ID" required >
     <button type="submit" class="btn btn-primary" name="submit_button" value="update_sample_data_item">Update Sample Data</button>
   </form>

   </div>
 </div>
</div>

{% endblock %}
